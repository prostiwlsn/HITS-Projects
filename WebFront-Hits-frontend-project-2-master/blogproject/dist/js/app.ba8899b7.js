(function(){"use strict";var t={1672:function(t,e,a){var o=a(9242),n=a(3396),r=a(7139);const i={class:"container-xxl fixed-top"},s={class:"navbar sticky-top navbar-expand-md"},l={class:"container"},u=(0,n._)("a",{class:"navbar-brand",href:"#"},"MemBlog",-1),c=(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),p={class:"collapse navbar-collapse",id:"navbarNav"},d={class:"container"},m={class:"row justify-content-between"},f={class:"col-6"},g={class:"navbar-nav"},h={class:"nav-item"},b=(0,n._)("a",{class:"nav-link",href:"#"},"Главная",-1),v={class:"nav-item"},_=(0,n._)("a",{class:"nav-link",href:"#"},"Группы",-1),y={class:"nav-item"},w=(0,n._)("a",{class:"nav-link",href:"#"},"Авторы",-1),k={class:"col-6"},D={key:0,class:"dropdown btn-group"},x={class:"nav-link dropdown-toggle",href:"#",id:"navbarDropdownMenuLink",role:"button","data-bs-toggle":"dropdown"},z={key:0,class:"dropdown-menu","aria-labelledby":"navbarDropdownMenuLink"},N={class:"dropdown-item",href:"#"},j=(0,n._)("button",{type:"button",class:"btn btn-primary"},"Войти",-1);function G(t,e,a,o,G,T){const S=(0,n.up)("router-link"),O=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("nav",s,[(0,n._)("div",l,[u,c,(0,n._)("div",p,[(0,n._)("div",d,[(0,n._)("div",m,[(0,n._)("div",f,[(0,n._)("ul",g,[(0,n._)("li",h,[(0,n.Wm)(S,{to:"/"},{default:(0,n.w5)((()=>[b])),_:1})]),(0,n._)("li",v,[(0,n.Wm)(S,{to:"/communities"},{default:(0,n.w5)((()=>[_])),_:1})]),(0,n._)("li",y,[(0,n.Wm)(S,{to:"/authors"},{default:(0,n.w5)((()=>[w])),_:1})])])]),(0,n._)("div",k,[G.isAuth?((0,n.wg)(),(0,n.iD)("div",D,[(0,n._)("a",x,(0,r.zw)(G.email),1),G.isAuth?((0,n.wg)(),(0,n.iD)("ul",z,[(0,n._)("li",null,[(0,n._)("a",N,[(0,n.Wm)(S,{to:"/profile"},{default:(0,n.w5)((()=>[(0,n.Uk)("Профиль")])),_:1})])]),(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"#",onClick:e[0]||(e[0]=(...t)=>T.logout&&T.logout(...t))},"Выйти")])])):(0,n.kq)("",!0)])):(0,n.kq)("",!0),G.isAuth?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(S,{key:1,to:"/login"},{default:(0,n.w5)((()=>[j])),_:1}))])])])])])]),(0,n.Wm)(O)])}a(560),a(3429);function T(t){var e=t.split(".")[1],a=e.replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(a).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(o)}var S={name:"App",components:{},data(){return{isAuth:!0,email:"email@email.com"}},mounted(){const t=localStorage.getItem("token");if(t){const e=T(t),a=new Date(1e3*e.exp),o=new Date;a<o&&(localStorage.removeItem("token"),this.isAuth=!1)}else this.isAuth=!1;this.isAuth&&this.getUserInfo()},computed:{},methods:{toLogin(){this.$router.push("/login")},async getUserInfo(){const t=localStorage.getItem("token");try{const e=await fetch("https://blog.kreosoft.space/api/account/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});if(401==e.status)this.$router.push("/login"),this.isAuth=!1;else if(!e.ok)throw new Error("Ошибка HTTP: "+e.status);const a=await e.json();console.log(a),this.email=a.email}catch(e){console.error("Ошибка входа:",e)}},logout(){localStorage.removeItem("token"),this.isAuth=!1}}},O=a(89);const P=(0,O.Z)(S,[["render",G]]);var U=P,A=a(2483);const E={class:"container-lg"},C={class:"row justify-content-center"},I={class:"col-lg-4 col-md-6 col-sm-12"},V={class:"card custom-card"},M=(0,n._)("div",{class:"card-title"},[(0,n._)("h1",{class:"display-4"},"Вход")],-1),H={class:"card-body"},L={class:"input-group mb-3"},W=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Email")],-1),Z={class:"input-group mb-3"},$=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Пароль")],-1),q=(0,n._)("a",{class:"nav-link",href:"#"},"Регистрация",-1);function B(t,e,a,r,i,s){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("div",C,[(0,n._)("div",I,[(0,n._)("div",V,[M,(0,n._)("div",H,[(0,n._)("div",L,[W,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[0]||(e[0]=t=>i.email=t)},null,512),[[o.nr,i.email]])]),(0,n._)("div",Z,[$,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[1]||(e[1]=t=>i.password=t)},null,512),[[o.nr,i.password]])]),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[2]||(e[2]=(...t)=>s.login&&s.login(...t))},"Войти"),(0,n.Wm)(l,{to:"/registration"},{default:(0,n.w5)((()=>[q])),_:1})])])])])])}var F={data(){return{email:"",password:""}},methods:{async login(){try{const t=await fetch("https://blog.kreosoft.space/api/account/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.email,password:this.password})});if(!t.ok)throw new Error("Ошибка HTTP: "+t.status);const e=await t.json(),a=e.token;localStorage.setItem("token",a),this.$router.push("/"),console.log(a)}catch(t){console.error("Ошибка входа:",t)}}}};const J=(0,O.Z)(F,[["render",B]]);var R=J;const K={class:"container-lg"},Y={class:"row justify-content-center"},Q={class:"col-lg-4 col-md-6 col-sm-12"},X={class:"card custom-card"},tt=(0,n._)("div",{class:"card-title"},[(0,n._)("h1",{class:"display-4"},"Регистрация")],-1),et={class:"card-body"},at={class:"input-group mb-3"},ot=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"ФИО")],-1),nt={class:"input-group mb-3"},rt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("label",{class:"input-group-text",for:"inputGroupSelect01"},"Пол")],-1),it=(0,n._)("option",{selected:""},"Выберите",-1),st=(0,n._)("option",{value:"Male"},"Женщина",-1),lt=(0,n._)("option",{value:"Female"},"Мужчина",-1),ut=[it,st,lt],ct={class:"input-group mb-3"},pt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Дата рождения")],-1),dt={class:"input-group mb-3"},mt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Телефон")],-1),ft={class:"input-group mb-3"},gt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Email")],-1),ht={class:"input-group mb-3"},bt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Пароль")],-1),vt=(0,n._)("a",{class:"nav-link",href:"#"},"Вход",-1);function _t(t,e,a,r,i,s){const l=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("div",K,[(0,n._)("div",Y,[(0,n._)("div",Q,[(0,n._)("div",X,[tt,(0,n._)("div",et,[(0,n._)("div",at,[ot,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[0]||(e[0]=e=>t.fullName=e)},null,512),[[o.nr,t.fullName]])]),(0,n._)("div",nt,[rt,(0,n.wy)((0,n._)("select",{class:"custom-select form-control",id:"inputGroupSelect01","onUpdate:modelValue":e[1]||(e[1]=t=>i.gender=t)},ut,512),[[o.bM,i.gender]])]),(0,n._)("div",ct,[pt,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",placeholder:"дд.мм.гг","onUpdate:modelValue":e[2]||(e[2]=t=>i.birthDate=t)},null,512),[[o.nr,i.birthDate]])]),(0,n._)("div",dt,[mt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[3]||(e[3]=t=>i.phoneNumber=t)},null,512),[[o.nr,i.phoneNumber]])]),(0,n._)("div",ft,[gt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[4]||(e[4]=t=>i.email=t)},null,512),[[o.nr,i.email]])]),(0,n._)("div",ht,[bt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[5]||(e[5]=t=>i.password=t)},null,512),[[o.nr,i.password]])]),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[6]||(e[6]=(...t)=>s.register&&s.register(...t))},"Зарегистрироваться"),(0,n.Wm)(l,{to:"/login"},{default:(0,n.w5)((()=>[vt])),_:1})])])])])])}var yt={name:"Registration-Form",data(){return{fullname:"",password:"",email:"",birthDate:"",gender:"",phoneNumber:""}},methods:{async register(){try{const t=await fetch("https://blog.kreosoft.space/api/account/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fullName:this.fullName,email:this.email,password:this.password,birthDate:this.birthDate,gender:this.gender,phoneNumber:this.phoneNumber})});if(!t.ok)throw new Error("Ошибка HTTP: "+t.status);const e=await t.json(),a=e.token;localStorage.setItem("token",a),this.$router.push("/"),console.log(a)}catch(t){console.error("Ошибка входа:",t)}}}};const wt=(0,O.Z)(yt,[["render",_t]]);var kt=wt;function Dt(t,e,a,o,r,i){return(0,n.wg)(),(0,n.iD)("div",null,"главная")}var xt={name:"Main-page"};const zt=(0,O.Z)(xt,[["render",Dt]]);var Nt=zt;const jt={class:"container-lg"},Gt={class:"row justify-content-center"},Tt={class:"col-lg-4 col-md-6 col-sm-12"},St={class:"card custom-card"},Ot=(0,n._)("div",{class:"card-title"},[(0,n._)("h1",{class:"display-4"},"Профиль")],-1),Pt={class:"card-body"},Ut={class:"input-group mb-3"},At=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"ФИО")],-1),Et={class:"input-group mb-3"},Ct=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("label",{class:"input-group-text",for:"inputGroupSelect01"},"Пол")],-1),It=(0,n._)("option",{value:"Female"},"Женщина",-1),Vt=(0,n._)("option",{value:"Male"},"Мужчина",-1),Mt=[It,Vt],Ht={class:"input-group mb-3"},Lt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Дата рождения")],-1),Wt={class:"input-group mb-3"},Zt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Email")],-1),$t={class:"input-group mb-3"},qt=(0,n._)("div",{class:"input-group-prepend"},[(0,n._)("span",{class:"input-group-text",id:"inputGroup-sizing-default"},"Телефон")],-1);function Bt(t,e,a,r,i,s){return(0,n.wg)(),(0,n.iD)("div",jt,[(0,n._)("div",Gt,[(0,n._)("div",Tt,[(0,n._)("div",St,[Ot,(0,n._)("div",Pt,[(0,n._)("div",Ut,[At,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[0]||(e[0]=t=>i.fullName=t)},null,512),[[o.nr,i.fullName]])]),(0,n._)("div",Et,[Ct,(0,n.wy)((0,n._)("select",{class:"custom-select form-control",id:"inputGroupSelect01","onUpdate:modelValue":e[1]||(e[1]=t=>i.gender=t)},Mt,512),[[o.bM,i.gender]])]),(0,n._)("div",Ht,[Lt,(0,n.wy)((0,n._)("input",{type:"date",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",placeholder:"дд.мм.гг","onUpdate:modelValue":e[2]||(e[2]=t=>i.birthDate=t)},null,512),[[o.nr,i.birthDate]])]),(0,n._)("div",Wt,[Zt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[3]||(e[3]=t=>i.email=t)},null,512),[[o.nr,i.email]])]),(0,n._)("div",$t,[qt,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default","onUpdate:modelValue":e[4]||(e[4]=t=>i.phoneNumber=t)},null,512),[[o.nr,i.phoneNumber]])]),(0,n._)("button",{type:"button",class:"btn btn-primary",onClick:e[5]||(e[5]=t=>s.editProfile())},"Изменить профиль")])])])])])}var Ft={name:"Profile-page",data(){return{email:"",fullName:"",birthDate:(new Date).toISOString().substr(0,10),gender:"",phoneNumber:""}},mounted(){this.fetchData()},methods:{async fetchData(){const t=localStorage.getItem("token");try{const e=await fetch("https://blog.kreosoft.space/api/account/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});if(401==e.status)console.log(123),this.$router.push("/login");else if(!e.ok)throw new Error("Ошибка HTTP: "+e.status);const a=await e.json();console.log(a),this.fullName=a.fullName,this.birthDate=new Date(a.birthDate).toISOString().substr(0,10),this.email=a.email,this.gender=a.gender,this.phoneNumber=a.phoneNumber}catch(e){console.error("Ошибка входа:",e)}},async editProfile(){const t=localStorage.getItem("token");try{const e=await fetch("https://blog.kreosoft.space/api/account/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({email:this.email,fullName:this.fullName,birthDate:this.birthDate,gender:this.gender,phoneNumber:this.phoneNumber})});if(!e.ok)throw new Error("Ошибка HTTP: "+e.status)}catch(e){console.error("Ошибка входа:",e)}}}};const Jt=(0,O.Z)(Ft,[["render",Bt]]);var Rt=Jt;const Kt={class:"container"},Yt={class:"overflow-auto",style:{"max-height":"800px"}};function Qt(t,e,a,o,r,i){const s=(0,n.up)("ListElement");return(0,n.wg)(),(0,n.iD)("div",Kt,[(0,n._)("div",Yt,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.list,(t=>((0,n.wg)(),(0,n.j4)(s,{key:t.id,author:t},null,8,["author"])))),128))])])}const Xt={class:"container"},te={class:"row justify-content-center"},ee={class:"col-lg-4 col-md-6 col-sm-12"},ae={class:"card"},oe={class:"card-title"},ne={class:"card-subtitle mb-2 text-muted"},re={class:"card-text"},ie={href:"#",class:"card-link"},se={href:"#",class:"card-link"};function le(t,e,a,o,i,s){return(0,n.wg)(),(0,n.iD)("div",Xt,[(0,n._)("div",te,[(0,n._)("div",ee,[(0,n._)("div",ae,[(0,n._)("h5",oe,(0,r.zw)(a.author.fullName),1),(0,n._)("h6",ne,"Создан: "+(0,r.zw)(a.author.created),1),(0,n._)("p",re,(0,r.zw)(a.author.birthDate),1),(0,n._)("a",ie,"Лайков: "+(0,r.zw)(a.author.likes),1),(0,n._)("a",se,"Постов: "+(0,r.zw)(a.author.posts),1)])])])])}var ue={name:"Author-List-Element",props:{author:{type:Object,required:!0}}};const ce=(0,O.Z)(ue,[["render",le]]);var pe=ce,de={name:"Authors-Page",data(){return{list:[]}},components:{ListElement:pe},mounted(){this.fetchData()},methods:{async fetchData(){try{const t=await fetch("https://blog.kreosoft.space/api/author/list",{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error("Ошибка HTTP: "+t.status);const e=await t.json();this.list=e}catch(t){console.error("Ошибка входа:",t)}}}};const me=(0,O.Z)(de,[["render",Qt]]);var fe=me;const ge=[{path:"/",name:"Home",component:Nt},{path:"/profile",name:"Profile",component:Rt},{path:"/login",name:"Login",component:R},{path:"/registration",name:"Registration",component:kt},{path:"/authors",name:"Authors",component:fe}];var he=(0,A.p7)({history:(0,A.PO)(),routes:ge});a(2166);(0,o.ri)(U).use(he).mount("#app")}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,o,n,r){if(!o){var i=1/0;for(c=0;c<t.length;c++){o=t[c][0],n=t[c][1],r=t[c][2];for(var s=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(a.O).every((function(t){return a.O[t](o[l])}))?o.splice(l--,1):(s=!1,r<i&&(i=r));if(s){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[o,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var o in e)a.o(e,o)&&!a.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,o){var n,r,i=o[0],s=o[1],l=o[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(n in s)a.o(s,n)&&(a.m[n]=s[n]);if(l)var c=l(a)}for(e&&e(o);u<i.length;u++)r=i[u],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},o=self["webpackChunkblogproject"]=self["webpackChunkblogproject"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=a.O(void 0,[998],(function(){return a(1672)}));o=a.O(o)})();
//# sourceMappingURL=app.ba8899b7.js.map